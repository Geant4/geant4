?RCS:
?MAKE:g4ui_build_qt_session g4ui_use_qt: g4system g4lib_build_shared g4clhep_base_dir g4debug g4ui_none Qt Myread Getfile Loc sed grep cat rm test 
?MAKE:	-pick add $@ %<
?S:g4ui_build_qt_session:
?S:	This variable determines whether the Qt UI will be built 
?S:.
?S:g4ui_use_qt:
?S:	This variable determines whether the Qt UI will be used.
?S:.
?INIT:#INITIALIZE QT UI OPTIONS
?INIT:g4ui_build_qt_session='n'
?INIT:g4ui_use_qt='n'
?INIT:#END QT UI OPTIONS

#
# BEGIN QT/QTUI PROBE
#

# Checks applied for all systems ONLY IF g4ui_none HAS NOT BEEN SET TO y
if test "x$g4ui_none" = "xn" ; then
    # Query the user to see if build of Qt UI module is needed
    g4message=`cat <<EOM

    G4UI_BUILD_QT_SESSION
    G4UI_USE_QT

Setting these variables will enable the building of the G4 Qt based 
user interface module and the use of this module in your applications
respectively.
The Qt3 or Qt4 headers, libraries and moc application are required to enable
the building of this module.
Do you want to enable build and use of this module?
EOM`

    # Read in the user response
    dflt=$g4ui_build_qt_session
    rp=$g4message
    . ./myread
    gans=$ans

    # Check response and take set variables as needed.
    case $gans in
        n*|N*)
	    g4ui_build_qt_session=n
            g4ui_use_qt=n
	    ;;
	y*|Y*)
	    g4ui_build_qt_session=y
            g4ui_use_qt=y
            ;;
    esac

    ##########

    ##########
    # Now, if user chose to build module, we need to check for a Qt
    # installation
    #
    if test "x$g4ui_build_qt_session" = "xy" ; then
	echo " "
	# NB Have to supply arg to qt script, just blank in this case!
	qt_search_dir=""
	. ./qt

	# If we didn't find Qt automatically, then ask user if they know
	# where it's installed...
	if test "x$g4_havegoodqt" = "xno" ; then
	    promptend="no"
	    user_qthome="the standard locations"

            while test "x$promptend" = "xno" ; do
	        g4message=`cat << EOM

Autodetection failed to locate Qt3 or Qt4 in $qthomeloc on your system.
Please enter the path to your Qt3 OR Qt4 install (i.e. if Qt4 is installed
in PATH/include/QT, PATH/include or PATH/include/qt4, enter PATH),
or type '-' to CANCEL the build of the Qt UI module.
Qt path:
EOM`
		dflt=""
                fn='d~(-)'
		rp=$g4message
		. ./getfile
		user_qthome=$ans

		if test "x$user_qthome" = "x-" ; then
		    # Cancel build...
		    g4ui_build_qt_session=n
		    g4ui_use_qt=n
		    echo "configure: build/use of Qt UI module cancelled"
		    promptend=yes
		else
		    # Check for installation in user directory
		    echo " "
		    qt_search_dir=$user_qthome
		    . ./qt

		    if test "x$g4_havegoodqt" = "xyes" ; then
			promptend=yes
		    fi
		fi #END TEST user_qthome = -
            done #END while promptend=no (for user input of Qt install)
        fi #END TEST g4_havegoodqt = no (for user prompt)
    fi #END TEST g4ui_build_qt_session (whether to build at all)
fi #END TEST g4ui_none = n
